---
// import { Image } from "astro:assets";
import { contentfulClient } from "../lib/contentful";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import CarouselHome from "@/components/CarouselHome.astro";
import Layout from "../layouts/Layout.astro";
import type { EntryFieldTypes } from "contentful";

interface About {
  contentTypeId: "about";
  fields: {
    title: EntryFieldTypes.Text;
    slug: string;
    aboutBio: EntryFieldTypes.RichText;
  };
}

const entries = await contentfulClient.getEntries<About>({
  content_type: "about",
});
const sliders = await contentfulClient.getEntries({ content_type: "sliders" });
const socials = await contentfulClient.getEntries({ content_type: "socials" });

const item = entries.items.filter((user: any) => {
  return user.fields.slug === "licencia";
})[0];

const homeSlider = sliders.items.filter((user: any) => {
  return user.fields.slug === "contacto";
})[0];

const askSession = socials.items.filter((i: any) => {
  return i.fields.slug === "ask-session";
})[0];

const content = item?.fields.aboutBio;

---

<Layout title="Contacto">
  <!-- <CarouselHome images={homeSlider?.fields.images} /> -->
  <div
    class="grid max-w-4xl mx-auto mt-12 bg-white relative z-20 pt-6 px-2"
  >
    <div>
      <h2 class="text-lg font-serif relative z-10">Contacto</h2>
    </div>
    <div
      class="flex flex-col items-start justify-start flex-1 w-full max-w-4xl pt-6 mt-6 md:items-baseline  md:flex-row"
    >
      <a
        rel="noopener noreferrer"
        target="_blank"
        href="https://www.instagram.com/etchegaray_sol/"
        class="flex flex-col items-start justify-center mb-12 font-sans text-lg md:my-0 md:mr-12 hover:text-yellow-700"
      >
        @etchegaray_sol
        <span class="text-sm underline opacity-75">Instagram</span>{" "}
      </a>
      <a
        rel="noopener noreferrer"
        target="_blank"
        class="flex flex-col mb-12 font-sans text-lg md:pl-12 hover:text-yellow-700"
        href="mailto:solchue.99@gmail.com"
      >
        solchue.99@gmail.com
        <span class="text-sm underline opacity-75">mail</span>
      </a>
      <a
        class="flex-col hidden font-sans text-lg leading-6 w-full text-yellow-700 text-right underline md:flex md:pl-12"
        href="#session"
      >
        Licencia
      </a>
    </div>
    {
      askSession && (
        <div
          id="session"
          class="flex flex-col md:justify-start justify-center md:items-center items-start text-left md:flex-row border-t pt-12 border-yellow-700"
        >
          <h1 class="text-2xl text-gray-900 pt-12 md:pt-0 text-left md:mr-0">
            {askSession.fields.title}
          </h1>
          <a
            rel="noopener noreferrer"
            target="_blank"
            href={`${askSession.fields.url}`}
            class="inline-block px-4 py-2 mt-2 md:ml-24 mr-2 text-xl font-bold text-gray-800 hover:text-yellow-900 uppercase bg-white"
          >
            Enviar solicitud
          </a>
        </div>
      )
    }
<!-- 
    {
      content && (
        <article
          class="prose prose-lg max-w-full mt-12 prose-invert"
          set:html={documentToHtmlString(content)}
        />
      )
    } -->
    <!-- {item?.fields?.aboutBio} -->
  </div>
</Layout>
